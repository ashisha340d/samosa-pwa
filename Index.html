<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Samosa Order Chat</title>
  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
  <h1>🥟 Samosa Orders</h1>
<div>
  <label>Your Email:</label> <input type="text" id="emailBox" /></div>


  <!-- Order Form -->
  <div id="orderForm">
    <input type="text" id="item" placeholder="Item (e.g. Samosa)" />
    <input type="number" id="qtyOrdered" placeholder="Qty" />
    <input type="text" id="notes" placeholder="Notes" />
    <button onclick="createOrder()">Place Order</button>
  </div>

  <h2>Today’s Orders</h2>
  <ul id="ordersList"></ul>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbwc6QZuiSCUc2kgdfxmn4uefZSf9KyBOLlen-Z9KdOacdrkOq7JzEKeWVsZKSt29qYs/exec";    
    // Fetch today's orders

    console.log("🥟 Samosa PWA loaded!");

async function loadOrders() {
  console.log("Loading orders from API:", API_URL);

  const res = await fetch(API_URL);
  const data = await res.json();

  console.log("API response:", data);   // 👈 debug log

  USER_EMAIL = data.email || "";
  document.getElementById("emailBox").value = USER_EMAIL;

  const list = document.getElementById("ordersList");
  list.innerHTML = "";

  if (data.result === "success") {
    data.data.forEach(order => {
      console.log("Rendering order:", order);   // 👈 debug log

      const li = document.createElement("li");
      li.textContent = `${order.item} x${order.qtyOrdered} (${order.notes}) - ${order.status}`;

      if (order.supervisor === USER_EMAIL && order.qtyPicked == 0) {
        const btn = document.createElement("button");
        btn.textContent = "❌ Delete";
        btn.onclick = () => deleteOrder(order.rowID);
        li.appendChild(btn);
      }

      list.appendChild(li);
    });
  }
}



    </script>
</body>
</html>
